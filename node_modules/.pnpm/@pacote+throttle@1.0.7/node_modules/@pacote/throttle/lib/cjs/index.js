"use strict";
exports.__esModule = true;
exports.throttle = void 0;
function throttle(fn, delay) {
    if (delay === void 0) { delay = 0; }
    var lastCalled = 0;
    var timer;
    var throttledFn = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var remainingDelay = Math.max(0, lastCalled + delay - Date.now());
        if (remainingDelay) {
            clearTimeout(timer);
            timer = setTimeout(function () {
                lastCalled = Date.now();
                fn.apply(void 0, args);
            }, remainingDelay);
        }
        else {
            lastCalled = Date.now();
            fn.apply(void 0, args);
        }
    };
    return Object.assign(throttledFn, {
        cancel: function () {
            lastCalled = 0;
            clearTimeout(timer);
        }
    });
}
exports.throttle = throttle;
